(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],h=0,f=[];h<o.length;h++)r=o[h],i[r]&&f.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={1:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([24,0]),a()})({"+KB5":function(t,e,a){"use strict";var s=a("oQRH"),i=a.n(s);i.a},"+NtP":function(t,e,a){"use strict";var s=a("oNJJ"),i=a.n(s);i.a},"0aSZ":function(t,e,a){},24:function(t,e,a){t.exports=a("Vtdi")},"2Wum":function(t,e,a){},"4G/S":function(t,e,a){"use strict";var s=a("0aSZ"),i=a.n(s);i.a},"4ekB":function(t,e,a){"use strict";var s=a("fmdS"),i=a.n(s);i.a},"AAh+":function(t,e,a){"use strict";var s=a("XvN4"),i=a.n(s);i.a},AKIh:function(t,e,a){"use strict";var s=a("fTxi"),i=a.n(s);i.a},"DmZ+":function(t,e,a){"use strict";var s=a("Z046"),i=a.n(s);i.a},FRiD:function(t,e,a){"use strict";var s=a("lB53"),i=a.n(s);i.a},IIHU:function(t,e,a){"use strict";var s=a("dk9J"),i=a.n(s);i.a},KnUK:function(t,e,a){"use strict";var s=a("y+av"),i=a.n(s);i.a},MllW:function(t,e,a){"use strict";var s=a("jOoS"),i=a.n(s);i.a},NRGd:function(t,e,a){"use strict";var s=a("hnIS"),i=a.n(s);i.a},Vtdi:function(t,e,a){"use strict";a.r(e);var s=a("yT7P"),i=(a("VRzm"),a("Kw5r")),n=a("Myzp"),r=a("K9oh"),o=a("iqUP"),c=a.n(o),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{"page-content":!1}},[a("f7-toolbar",{staticClass:"color-theme-yellow bg-color-white",attrs:{tabbar:"","no-hairline":"",labels:""}},[a("f7-link",{attrs:{"tab-link":"",href:"/","route-tab-id":"home"}},[a("f7-icon",{attrs:{ion:"ios-home",size:"24"}}),a("span",{staticClass:"tabbar-label"},[t._v("Home")])],1),a("f7-link",{attrs:{"tab-link":"",href:"/ranking","route-tab-id":"ranking"}},[a("f7-icon",{attrs:{ion:"ios-trophy",size:"24"}}),a("span",{staticClass:"tabbar-label"},[t._v("Ranking")])],1),a("f7-link",{attrs:{id:"create-match"},on:{click:t.createMatch}},[a("f7-icon",{attrs:{ion:"ios-add",size:"38"}}),a("div",{staticClass:"icon-placeholder"},[t._v("placeholder")]),a("span",{staticClass:"tabbar-label"},[t._v("PLAY")])],1),a("f7-link",{attrs:{"tab-link":"",href:"/matches","route-tab-id":"matches"}},[a("f7-icon",{attrs:{ion:"ios-list-box",size:"24"}}),a("span",{staticClass:"tabbar-label"},[t._v("Matches")])],1),a("f7-link",{attrs:{"tab-link":"",href:"/profile","route-tab-id":"profile"}},[a("f7-icon",{attrs:{ion:"ios-person",size:"24"}}),a("span",{staticClass:"tabbar-label"},[t._v("Profile")])],1)],1),a("f7-tabs",{attrs:{routable:""}},[a("f7-tab",{staticClass:"page-content",attrs:{id:"home"}}),a("f7-tab",{staticClass:"page-content",attrs:{id:"ranking"}}),a("f7-tab",{staticClass:"page-content",attrs:{id:"matches"}}),a("f7-tab",{staticClass:"page-content",attrs:{id:"profile"}})],1)],1)},u=[],h={name:"MainTabs",methods:{createMatch:function(){var t=this.$root.user;return t?t.isInMatch?this.$f7.toast.show({text:"You are in a ongoing match.",position:"center",closeTimeout:3e3}):t.verified?void this.$f7router.navigate("/create-match"):this.$f7.toast.show({text:"Please become a verified member first.",position:"center",closeTimeout:3e3}):this.$f7.toast.show({text:"Please sign in first.",position:"center",closeTimeout:3e3})}}},f=h,d=(a("ZeCp"),a("KHd+")),p=Object(d["a"])(f,l,u,!1,null,null,null),m=p.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("f7-navbar",{staticClass:"bg-color-white",attrs:{title:"Home","no-hairline":""}}),t._m(0)],1)},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"announcement"},[a("h2",[t._v("Welcome to Table Denis Club!")]),a("p",[t._v("To join the club, you must be introduced to all members of the Club. ")]),a("p",[t._v("As a club member, you must create an account on this App. Note that all your data is readable to anyone.")]),a("p",[t._v("You account will need to be manually verified by the administrator of this App before you can start a match and do other actions.")]),a("p",[t._v("Once your account is verified, you can (1) start a match as Judge, (2) join a match as Player, (3) collect points from your matches, (4) be shown in the Ranking, (5) post message / cheer for players within the page of a match.")])])}],b={name:"Home"},y=b,_=(a("NRGd"),Object(d["a"])(y,v,g,!1,null,"c5598f1e",null)),C=_.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ranking"},[a("f7-navbar",{staticClass:"bg-color-white",attrs:{title:"Ranking","no-hairline":""}}),t.isInitialLoadingFinished?t._e():a("loader"),a("ul",{staticClass:"ranking-list"},t._l(t.players,function(t,e){return a("ranking-cell",{key:t.id,attrs:{rank:e+1,player:t}})}))],1)},S=[],k=(a("Vd3H"),a("RW0V"),a("rGqo"),a("yt8O"),a("hhXQ"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("img",{staticClass:"loader",attrs:{src:a("WbWX")}})}),P=[],x={name:"Loader"},M=x,$=(a("xqeh"),Object(d["a"])(M,k,P,!1,null,"1b069888",null)),j=$.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ranking-cell",class:{gold:1===t.rank,silver:2===t.rank,bronze:3===t.rank,top3:t.rank<4}},[t.player.isInMatch?a("div",{staticClass:"is-playing blink"}):t._e(),a("span",{staticClass:"rank"},[t._v(t._s(t.bakedRank))]),a("img",{staticClass:"photo",attrs:{src:t.player.photoURL}}),a("div",{staticClass:"info"},[t.rank<4&&t.player.title?a("span",{staticClass:"title shimmer"},[t._v(t._s(t.player.title))]):t._e(),a("span",{staticClass:"name"},[t._v(t._s(t.player.fullname))]),t.rank<4&&t.player.words?a("span",{staticClass:"words"},[t._v("- "+t._s(t.player.words))]):t._e()]),a("span",{staticClass:"points"},[t._v(t._s(t.player.points))])])},T=[],R=(a("xfY5"),{name:"RankingCell",props:{rank:{type:Number,default:0},player:{type:Object,default:function(){return{}}}},computed:{bakedRank:function(){return 1===this.rank?"🏅":2===this.rank?"🥈":3===this.rank?"🥉":this.rank}}}),D=R,L=(a("AAh+"),Object(d["a"])(D,O,T,!1,null,"5cb9a13e",null)),I=L.exports,N={name:"Ranking",components:{Loader:j,RankingCell:I},data:function(){return{isInitialLoadingFinished:!1,players:[]}},created:function(){var t=this;this.$db.ref("users").orderByChild("verified").equalTo(!0).on("value",function(e){var a=e.val()||{},i=Object.values(a).map(function(t,e){return Object(s["a"])({},t,{id:Object.keys(a)[e]})});i.sort(function(t,e){return e.points-t.points}),t.players=i,t.isInitialLoadingFinished=!0})}},A=N,U=(a("+KB5"),Object(d["a"])(A,w,S,!1,null,"7c14efa4",null)),F=U.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-page-content",{staticClass:"container"},[a("div",{staticClass:"close-button",on:{click:function(e){t.$f7router.back()}}},[a("f7-icon",{attrs:{ion:"ios-close",size:"42"}})],1),a("div",{staticClass:"header"},[t._v("Ping Pong?")]),a("note",[a("small",[t._v("📜Read "),a("a",{attrs:{href:"#rules"}},[t._v("the rules")]),t._v(" at the bottom first!")])]),a("div",{staticClass:"legend text-align-left"},[t._v("New Match")]),a("div",{staticClass:"field"},[a("label",{staticClass:"uk-label",attrs:{for:"judge"}},[t._v("Judge")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.judge,expression:"judge"}],staticClass:"uk-select",attrs:{id:"judge"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.judge=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}}),t._l(t.judgeList,function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.fullname))])})],2)]),a("div",{staticClass:"field"},[a("label",{staticClass:"uk-label",attrs:{for:"player1"}},[t._v("Player 1")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.player1,expression:"player1"}],staticClass:"uk-select",attrs:{id:"player1"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.player1=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}}),t._l(t.player1List,function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.fullname))])})],2)]),a("div",{staticClass:"field"},[a("label",{staticClass:"uk-label",attrs:{for:"player2"}},[t._v("Player 2")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.player2,expression:"player2"}],staticClass:"uk-select",attrs:{id:"player2"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.player2=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}}),t._l(t.player2List,function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.fullname))])})],2)]),a("div",{staticClass:"field"},[a("label",{staticClass:"uk-label",attrs:{for:"numberOfSets"}},[t._v("Number of sets")]),a("div",{staticClass:"input-group"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.numberOfSets,expression:"numberOfSets"}],staticClass:"uk-radio",attrs:{value:"1",type:"radio",name:"numberOfSets"},domProps:{checked:t._q(t.numberOfSets,"1")},on:{change:function(e){t.numberOfSets="1"}}}),t._v("1")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.numberOfSets,expression:"numberOfSets"}],staticClass:"uk-radio",attrs:{value:"3",type:"radio",name:"numberOfSets"},domProps:{checked:t._q(t.numberOfSets,"3")},on:{change:function(e){t.numberOfSets="3"}}}),t._v("3")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.numberOfSets,expression:"numberOfSets"}],staticClass:"uk-radio",attrs:{value:"5",type:"radio",name:"numberOfSets"},domProps:{checked:t._q(t.numberOfSets,"5")},on:{change:function(e){t.numberOfSets="5"}}}),t._v("5")])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"uk-label",attrs:{for:"pointsPerSet"}},[t._v("Points per set")]),a("div",{staticClass:"input-group"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pointsPerSet,expression:"pointsPerSet"}],staticClass:"uk-radio",attrs:{value:"5",type:"radio",name:"pointsPerSet"},domProps:{checked:t._q(t.pointsPerSet,"5")},on:{change:function(e){t.pointsPerSet="5"}}}),t._v("5")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pointsPerSet,expression:"pointsPerSet"}],staticClass:"uk-radio",attrs:{value:"11",type:"radio",name:"pointsPerSet"},domProps:{checked:t._q(t.pointsPerSet,"11")},on:{change:function(e){t.pointsPerSet="11"}}}),t._v("11")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pointsPerSet,expression:"pointsPerSet"}],staticClass:"uk-radio",attrs:{value:"21",type:"radio",name:"pointsPerSet"},domProps:{checked:t._q(t.pointsPerSet,"21")},on:{change:function(e){t.pointsPerSet="21"}}}),t._v("21")])])]),t.error?a("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e(),a("div",{staticClass:"actions"},[a("span",{staticClass:"uk-button",on:{click:t.createMatch}},[t._v("⚔️Fight!")])]),a("rules")],1)],1)},B=[],W=(a("Z2Ku"),a("L9s1"),a("dRSK"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"note"},[t._t("default")],2)}),q=[],Y=(a("aBMy"),{}),z=Object(d["a"])(Y,W,q,!1,null,"955b5066",null),G=z.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"rules"},[a("div",{staticClass:"title"},[t._v("Rules📜")]),t._m(0),a("note",[a("small",[t._v("🏓Ping Pong time!")])])],1)},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dl",{staticClass:"uk-description-list"},[a("dt",[t._v("Rule 1👨🏻‍⚖️")]),a("dd",[t._v("The precense of a third-person (the Judge) is required for a match to be valid.")]),a("dt",[t._v("Rule 2👌🏻")]),a("dd",[t._v("Hitting the ceiling counts.")]),a("dt",[t._v("Rule 3👌🏻")]),a("dd",[t._v("Hitting the ceiling counts.")]),a("dt",[t._v("More Rules📑")]),a("dd",[t._v("Please refer to\n      "),a("a",{attrs:{href:"https://d3mjm6zw6cr45s.cloudfront.net/2018/01/2018ITTFHandbook.pdf",target:"_blank"}},[t._v("The International Table Tennis Federation Handbook")]),t._v(". If there is any conflict between ITTF rules and TDC rules, TDC rules have higher priority.\n    ")])])}],Z={name:"Rules",components:{Note:G}},J=Z,V=(a("AKIh"),Object(d["a"])(J,H,K,!1,null,"68c5913a",null)),X=V.exports,Q={name:"Scoreboard",components:{Note:G,Rules:X},data:function(){return{players:[],judge:void 0,player1:void 0,player2:void 0,numberOfSets:3,pointsPerSet:11,error:void 0}},computed:{user:function(){return this.$root.$data.user},judgeList:function(){var t=this;return this.players.filter(function(e){return e!==t.player1&&e!==t.player2})},player1List:function(){var t=this;return this.players.filter(function(e){return e!==t.judge&&e!==t.player2})},player2List:function(){var t=this;return this.players.filter(function(e){return e!==t.player1&&e!==t.judge})}},created:function(){var t=this;this.$f7.dialog.preloader("Loading..."),this.$db.ref("users").orderByChild("verified").equalTo(!0).once("value").then(function(e){var a=e.val();t.players=Object.keys(a).map(function(t){return Object(s["a"])({},a[t],{id:t})}),t.judge=t.players.find(function(e){return e.id===t.user.uid}),t.$f7.dialog.close()})},methods:{createMatch:function(){var t=this;return this.players.includes(this.judge)?this.players.includes(this.player1)?this.players.includes(this.player2)?(this.$f7.dialog.preloader("Creating match..."),void this.$fns.httpsCallable("createMatch")({judge:this.judge.id,player1:this.player1.id,player2:this.player2.id,numberOfSets:this.numberOfSets,pointsPerSet:this.pointsPerSet}).then(function(e){var a=e.data,s=a.matchId,i=a.judge,n=a.player1,r=a.player2;t.$f7.dialog.close();var o=t.$f7.notification.create({icon:"🏓",title:"Table Denis Club",titleRightText:"now",subtitle:"Match Created!",text:"".concat(n.emoji).concat(n.fullname," vs. ").concat(r.fullname).concat(r.emoji,", judged by ").concat(i.fullname,". ⚔️Fight!"),closeTimeout:3e3,closeOnClick:!0});o.open(),t.$f7router.navigate("/scoreboard/".concat(s),{reloadCurrent:!0})}).catch(function(e){t.error=e.message,t.$f7.dialog.close()})):this.error="Please select a player2.":this.error="Please select player1.":this.error="Please select a judge."}}},tt=Q,et=(a("MllW"),Object(d["a"])(tt,E,B,!1,null,"73a8eaa5",null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-page-content",{staticClass:"container"},[t.isGameLoaded?[void 0===t.match.firstServer?[a("div",{staticClass:"first-server-picker"},[t._l([t.match.player1,t.match.player2],function(e,s){return a("div",{key:s,staticClass:"player",class:{p2:1===s}},[a("img",{staticClass:"photoURL",attrs:{src:e.photoURL},on:{click:function(e){t.selectedFirstServer=s}}}),a("span",{staticClass:"name"},[t._v(t._s(t.selectedFirstServer===s?"🏓":"")+t._s(e.fullname))]),a("span",{staticClass:"points"},[t._v(t._s(t.match.isFinished?t.match.pointsBeforeMatch[s]:e.points))])])}),a("span",{staticClass:"v"},[t._v("V")]),a("span",{staticClass:"s"},[t._v("S")]),a("span",{staticClass:"instruction"},[t._v("Please select first server by clicking on player photo:")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.selectedFirstServer,expression:"selectedFirstServer !== undefined"}],staticClass:"uk-button set-first-server",on:{click:t.confirmFisrtServer}},[t._v("Confirm")])],2)]:[a("f7-swiper",{staticClass:"swiper",attrs:{id:"swiper",init:t.isGameLoaded,navigation:""}},t._l(t.match.resultTable,function(e,s){return a("f7-swiper-slide",{key:s,staticClass:"scoreboard"},[a("div",{staticClass:"scores"},[a("div",[a("span",{on:{click:function(e){t.win(t.order[0])}}},[t._v("\n                  "+t._s(e[t.order[0]])+"\n                ")]),a("span",{staticClass:"decrease-button",on:{click:function(e){t.decrease(t.order[0])}}})]),a("span",[t._v(":")]),a("div",[a("span",{on:{click:function(e){t.win(t.order[1])}}},[t._v("\n                  "+t._s(e[t.order[1]])+"\n                ")]),a("span",{staticClass:"decrease-button",on:{click:function(e){t.decrease(t.order[1])}}})])])])})),a("div",{staticClass:"players"},[a("div",{staticClass:"player"},[a("img",{staticClass:"photoURL",attrs:{src:t.players[0].photoURL}}),a("div",{staticClass:"info"},[a("span",{staticClass:"name"},[t._v(t._s(t.players[0].fullname))]),a("span",{staticClass:"points"},[t._v(t._s(t.players[0].points))])])]),a("div",{staticClass:"player p2"},[a("div",{staticClass:"info"},[a("span",{staticClass:"name"},[t._v(t._s(t.players[1].fullname))]),a("span",{staticClass:"points"},[t._v(t._s(t.players[1].points))])]),a("img",{staticClass:"photoURL",attrs:{src:t.players[1].photoURL}})])]),a("match-result-sheet",{attrs:{match:t.match,"current-server":t.currentServer,winner:t.winner}}),a("span",{staticClass:"cheer-button",on:{click:function(e){t.cheer(0)}}},[t._v("🎉")]),a("span",{staticClass:"cheer-button",on:{click:function(e){t.cheer(1)}}},[t._v("🎉")]),a("canvas",{attrs:{id:"confetti-cannon"}}),a("f7-segmented",{staticClass:"menu"},[a("f7-button",{attrs:{color:"white",fill:"","icon-ion":"ios-chatboxes"},on:{click:function(e){t.leftPanelOpened=!0}}}),a("f7-button",{attrs:{color:"white",fill:"","icon-ion":"ios-more"},on:{click:function(e){t.rightPanelOpened=!0}}})],1),a("div",{staticClass:"left-panel",class:{active:t.leftPanelOpened}},[a("chat"),a("div",{staticClass:"close-left-panel",class:{active:t.leftPanelOpened},on:{click:function(e){t.leftPanelOpened=!1}}})],1),a("div",{staticClass:"right-panel",class:{active:t.rightPanelOpened}},[t.canMakeChange?[t.match.finished?[a("span",[t._v("Match finished at "+t._s(t.format(t.match.finishedAt))+".")])]:[a("f7-button",{attrs:{disabled:!t.isMatchFinished,color:"black",fill:""},on:{click:t.save}},[t._v("Save")]),a("f7-button",{attrs:{color:"black"},on:{click:t.cancel}},[t._v("Cancel")])]]:[t.match.finished?[a("span",[t._v("Match finished at "+t._s(t.format(t.match.finishedAt))+".")])]:[a("span",[t._v("Match has been going for "+t._s(t.distanceInWordsToNow(t.match.createdAt))+".")])]],a("div",{staticClass:"separator"}),a("f7-button",{attrs:{color:"black"},on:{click:t.leave}},[t._v("Leave")]),a("div",{staticClass:"close-right-panel",class:{active:t.rightPanelOpened},on:{click:function(e){t.rightPanelOpened=!1}}})],2)]]:a("loader")],2)],1)},it=[],nt=(a("SRfc"),a("cPJV")),rt=a.n(nt),ot=a("YlT8"),ct=a.n(ot),lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"match-result-sheet"},t._l([0,1],function(e){return a("MatchResultSheetRow",{key:e,attrs:{player:"string"===typeof t.match["player"+(e+1)]?{}:t.match["player"+(e+1)],"result-list":t.resultLists[e],result:t.result[e],"points-assigned":t.match.pointsAssigned&&t.match.pointsAssigned[e],"show-border":0===e,"is-winner":void 0===t.winner?void 0:t.winner===e,"is-current-server":t.currentServer===e}})}))},ut=[],ht=a("k5N+"),ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"match-result-sheet-row",class:{border:t.showBorder,winner:t.isWinner}},[a("span",{staticClass:"name"},[a("span",{staticClass:"prefix"},[t._v(t._s(t.prefix))]),t._v(t._s(t.player.fullname)),t.pointsAssigned?a("sup",[t._v(t._s(t.pointsAssigned>0?"+":"")+t._s(t.pointsAssigned))]):t._e()]),t._l(t.resultList,function(e,s){return a("span",{key:s,staticClass:"score",class:{odd:s%2!==0,even:s%2===0}},[t._v(t._s(e))])}),a("span",{staticClass:"result"},[t._v(t._s(t.result))])],2)},dt=[],pt={name:"MatchResultSheetRow",props:{player:{type:Object,default:function(){return{}}},resultList:{type:Array,default:function(){return[]}},result:{type:Number,default:0},pointsAssigned:{type:Number,default:0},isWinner:{type:Boolean,default:void 0},isCurrentServer:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!1}},computed:{prefix:function(){return!0===this.isWinner?"🏆":void 0===this.isWinner&&this.isCurrentServer?"🏓":""}}},mt=pt,vt=(a("DmZ+"),Object(d["a"])(mt,ft,dt,!1,null,"66dcc4b6",null)),gt=vt.exports,bt={name:"MatchResultSheet",components:{MatchResultSheetRow:gt},props:{match:{type:Object,default:function(){return{}}},currentServer:{type:Number,default:void 0}},computed:{resultLists:function(){var t=[[],[]];return this.match.resultTable.map(function(e){var a=Object(ht["a"])(e,2),s=a[0],i=a[1];t[0].push(s),t[1].push(i)}),t},result:function(){var t=this;return this.match.resultTable.reduce(function(e,a){return a[0]-a[1]>=2&&a[0]>=t.match.pointsPerSet&&(e[0]+=1),a[1]-a[0]>=2&&a[1]>=t.match.pointsPerSet&&(e[1]+=1),e},[0,0])},isMatchFinished:function(){var t=Math.ceil(this.match.numberOfSets/2);return this.result[0]===t||this.result[1]===t},winner:function(){return this.isMatchFinished?this.result[0]>this.result[1]?0:1:void 0}}},yt=bt,_t=(a("tY13"),Object(d["a"])(yt,lt,ut,!1,null,null,null)),Ct=_t.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat"},[a("f7-messagebar",{ref:"messagebar",attrs:{disabled:!t.user,placeholder:t.user?"Chat now!":"Sign in to chat!"},on:{submit:t.onSubmit}},[a("f7-icon",{staticStyle:{color:"#17b492"},attrs:{slot:"send-link",ion:"ios-paper-plane",size:"22"},slot:"send-link"})],1),a("f7-messages",[0===t.messages.length?a("f7-messages-title",[t._v("Send the first message!")]):t._e(),t._l(t.messages,function(e,s){return a("f7-message",{key:e.id,attrs:{type:e.type,text:e.text,name:e.name,avatar:e.avatar,first:t.isFirstMessage(e,s),last:t.isLastMessage(e,s),tail:t.isTailMessage(e,s)}})})],2)],1)},St=[],kt=(a("f3/d"),{name:"Chat",props:{matchId:{type:String,default:""}},data:function(){return{messages:[]}},computed:{user:function(){return this.$root.user}},created:function(){var t=this;this.$db.ref("chats/".concat(this.matchId)).on("child_added",function(e){var a=e.val();t.messages.unshift({id:e.key,text:a.content,type:a.sentBy===(t.user&&t.user.uid)?"sent":"received",sentBy:a.sentBy,name:"Someone"}),t.loadUserInfo(t.messages[0])})},methods:{loadUserInfo:function(t){this.$db.ref("users/".concat(t.sentBy)).on("value",function(e){var a=e.val();a&&(i["a"].set(t,"name",a.fullname),i["a"].set(t,"avatar",a.photoURL))})},isFirstMessage:function(t,e){var a=this.messages[e-1];return!a||a.type!==t.type||a.name!==t.name},isLastMessage:function(t,e){var a=this.messages[e+1];return!a||a.type!==t.type||a.name!==t.name},isTailMessage:function(t,e){var a=this.messages[e+1];return!a||a.type!==t.type||a.name!==t.name},onSubmit:function(t){var e=this;t&&this.user&&this.$db.ref("chats/".concat(this.matchId)).push({content:t,sentBy:this.user.uid,createdAt:(new Date).getTime()}).then(function(){e.$refs.messagebar.f7Messagebar.clear()})}}}),Pt=kt,xt=(a("IIHU"),Object(d["a"])(Pt,wt,St,!1,null,null,null)),Mt=xt.exports,$t=(a("91GP"),a("xmWZ")),jt=a("oyJW"),Ot=a("LiCP"),Tt=(a("g3Wy"),a("D0BC")),Rt=a.n(Tt),Dt=a("mNz5"),Lt=a.n(Dt),It=a("hzCD"),Nt=a.n(It),At=4,Ut=45,Ft=2800,Et=function t(e){var a=this;Object($t["a"])(this,t),Object(jt["a"])(this,"setupListeners",function(){Ot["b"].ticker.addEventListener("tick",a.render)}),Object(jt["a"])(this,"setCanvasSize",function(){a.canvas.width=window.innerWidth*a.dpr,a.canvas.height=window.innerHeight*a.dpr,a.canvas.style.width=window.innerWidth+"px",a.canvas.style.height=window.innerHeight+"px"}),Object(jt["a"])(this,"fire",function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:310,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8800,r=0;while(r<i){var o=Rt()(4,6)*a.dpr,c=Rt()(15,25)*a.dpr,l=Rt()(30,255),u=Rt()(30,230),h=Rt()(30,230),f="rgb(".concat(l,", ").concat(u,", ").concat(h,")"),d=Rt()(10,-10),p=Rt()(.07,.05),m=0,v=Lt()(),g=Object(jt["a"])({},v,{angle:s,velocity:n,x:t,y:e,r:o,d:c,color:f,tilt:d,tiltAngleIncremental:p,tiltAngle:m});Object.assign(a.confettiSprites,g),a.confettiSpriteIds.push(v),a.tweenConfettiParticle(v),r++}}),Object(jt["a"])(this,"tweenConfettiParticle",function(t){var e=a.confettiSprites[t].angle-Ut/2,s=a.confettiSprites[t].angle+Ut/2,i=a.confettiSprites[t].velocity/4,n=a.confettiSprites[t].velocity,r=Rt()(i,n),o=Rt()(e,s),c=Ft,l=Rt()(.1,.25),u=0;Ot["b"].to(a.confettiSprites[t],At,{physics2D:{velocity:r,angle:o,gravity:c,friction:l},d:u,ease:Ot["a"].easeIn,onComplete:function(){Nt()(a.confettiSpriteIds,t),delete a.confettiSprites[t]}})}),Object(jt["a"])(this,"updateConfettiParticle",function(t){var e=a.confettiSprites[t],s=5e-4*e.d;e.angle+=.01,e.tiltAngle+=s,e.tiltAngle+=e.tiltAngleIncremental,e.tilt=Math.sin(e.tiltAngle-e.r/2)*e.r*2,e.y+=2*Math.sin(e.angle+e.r/2),e.x+=Math.cos(e.angle)/2}),Object(jt["a"])(this,"drawConfetti",function(){a.confettiSpriteIds.map(function(t){var e=a.confettiSprites[t];a.ctx.beginPath(),a.ctx.lineWidth=e.d/2,a.ctx.strokeStyle=e.color,a.ctx.moveTo(e.x+e.tilt+e.r,e.y),a.ctx.lineTo(e.x+e.tilt,e.y+e.tilt+e.r),a.ctx.stroke(),a.updateConfettiParticle(t)})}),Object(jt["a"])(this,"render",function(){a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.drawConfetti()}),this.canvas=document.getElementById(e),this.dpr=window.devicePixelRatio||1,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.dpr,this.dpr),this.confettiSpriteIds=[],this.confettiSprites={},this.pointer={},this.setupListeners(),this.setCanvasSize(),this.timer=setTimeout(this.handleMouseup,1e3)},Bt=Et,Wt={name:"Scoreboard",components:{Loader:j,MatchResultSheet:Ct,Chat:Mt},data:function(){return{match:null,selectedFirstServer:void 0,currentDisplayingSet:0,isSwiperListenerSet:!1,leftPanelOpened:!1,rightPanelOpened:!1}},computed:{isGameLoaded:function(){return this.match&&"string"!==typeof this.match.createdBy&&"string"!==typeof this.match.judge&&"string"!==typeof this.match.player1&&"string"!==typeof this.match.player2},canMakeChange:function(){return this.isGameLoaded&&[this.match.judge.id,this.match.createdBy.id].includes(this.$root.user&&this.$root.user.uid)},firstServer:function(){return(this.match.firstServer+this.currentDisplayingSet%2)%2},currentServer:function(){var t;if(0===this.currentDisplayingSet)t=this.firstServer;else{var e=this.match.resultTable[this.currentDisplayingSet-1];t=e[0]>e[1]?0:1}var a=this.match.resultTable[this.currentDisplayingSet].reduce(function(t,e){return t+e},0),s=Math.round((a+1)/2)%2?0:1;return 0===t?s:s?0:1},currentReceiver:function(){return 0==this.currentServer?1:0},order:function(){var t=this.currentDisplayingSet%2,e=0===t?1:0;return[t,e]},players:function(){return[this.match["player".concat(this.order[0]+1)],this.match["player".concat(this.order[1]+1)]]},result:function(){var t=this;return this.match.resultTable.reduce(function(e,a){return a[0]-a[1]>=2&&a[0]>=t.match.pointsPerSet&&(e[0]+=1),a[1]-a[0]>=2&&a[1]>=t.match.pointsPerSet&&(e[1]+=1),e},[0,0])},currentPlayingSet:function(){return Math.max(0,this.result[0]+this.result[1]-1)},isMatchSaved:function(){return this.match.finished},isMatchFinished:function(){if(this.isMatchSaved)return!0;var t=Math.ceil(this.match.numberOfSets/2);return this.result[0]===t||this.result[1]===t},winner:function(){return this.isMatchFinished?this.result[0]>this.result[1]?0:1:void 0},user:function(){return this.$root.$data.user}},updated:function(){var t=this;!0!==this.isGameLoaded||void 0===this.match.firstServer||this.isSwiperListenerSet||(this.isSwiperListenerSet=!0,this.$nextTick(function(){var e=t.$f7.swiper.get("#swiper");e.on("slideChange",function(){t.currentDisplayingSet=e.activeIndex}),t.confettiCannon=new Bt("confetti-cannon")}))},created:function(){var t=this,e=this.$f7route.params.id;this.$db.ref("matches/".concat(e)).on("value",function(a){var i=a.val();return i?t.isGameLoaded?(delete i.createdBy,delete i.judge,delete i.player1,delete i.player2,void(t.match=Object(s["a"])({},t.match,i))):(t.match=Object(s["a"])({},i,{id:e}),void t.loadUserInfo()):(t.$f7router.navigate("/matches",{reloadCurrent:!0}),void t.$f7.toast.show({text:"Match not found.",closeTimeout:3e3}))}),this.$db.ref("cheers/".concat(e)).orderByChild("createdAt").startAt(Date.now()).on("child_added",function(e){var a=e.val();t.user&&a.uid===t.user.uid||t.fire(a.to)})},methods:{format:function(t){return rt()(new Date(t),"YYYY-MM-DD HH:mm")},distanceInWordsToNow:function(t){return ct()(new Date(t))},loadUserInfo:function(){var t=this;["createdBy","judge","player1","player2"].forEach(function(e){t.$db.ref("users/".concat(t.match[e])).on("value",function(a){i["a"].set(t.match,e,Object(s["a"])({},a.val(),{id:a.key}))})})},confirmFisrtServer:function(){var t=this;this.canMakeChange&&(this.$f7.dialog.preloader("Setting first server..."),this.$db.ref("matches/".concat(this.match.id,"/firstServer")).set(this.selectedFirstServer).then(function(){t.$f7.dialog.close()}).catch(function(e){t.$f7.toast.show({text:e.message,closeTimeout:3e3}),t.$f7.dialog.close()}))},isGameFinished:function(t){var e=t[0]-t[1]>=2&&t[0]>=this.match.pointsPerSet,a=t[1]-t[0]>=2&&t[1]>=this.match.pointsPerSet;return e||a},broadcastCurrentResult:function(){var t=this.match.resultTable[this.currentDisplayingSet][0]+this.match.resultTable[this.currentDisplayingSet][1],e=this.match.resultTable[this.currentDisplayingSet][0]>this.match.resultTable[this.currentDisplayingSet][1]?0:1,a=this.isGameFinished(this.match.resultTable[this.currentDisplayingSet])?"".concat(this.match["player".concat(e+1)].fullname," won"):"".concat(this.match["player".concat(this.currentServer+1)].fullname," is serving"),s=t%2===0?"".concat(this.match.resultTable[this.currentDisplayingSet][this.currentReceiver]," : ").concat(this.match.resultTable[this.currentDisplayingSet][this.currentServer],", ").concat(this.match.resultTable[this.currentDisplayingSet][this.currentServer]," : ").concat(this.match.resultTable[this.currentDisplayingSet][this.currentReceiver],", ").concat(a,"."):"".concat(this.match.resultTable[this.currentDisplayingSet][this.currentServer]," : ").concat(this.match.resultTable[this.currentDisplayingSet][this.currentReceiver],", ").concat(a,"."),i=new SpeechSynthesisUtterance(s);i.voice=window.speechSynthesis.getVoices()[49],window.speechSynthesis.speaking&&window.speechSynthesis.cancel(),window.speechSynthesis.speak(i)},win:function(t){var e=this;if(this.canMakeChange)if(this.isMatchFinished)this.$f7.toast.show({text:"Match is finished.",closeTimeout:3e3});else if(this.currentDisplayingSet>0&&!this.isGameFinished(this.match.resultTable[this.currentDisplayingSet-1]))this.$f7.toast.show({text:"Please finish the previous game.",closeTimeout:3e3});else{var a=this.match.resultTable[this.currentDisplayingSet];this.isGameFinished(a)?this.$f7.toast.show({text:"Game is finished.",closeTimeout:3e3}):this.$db.ref("matches/".concat(this.match.id,"/resultTable/").concat(this.currentDisplayingSet,"/").concat(t)).set(this.match.resultTable[this.currentDisplayingSet][t]+1).then(function(){e.broadcastCurrentResult()}).catch(function(t){e.$f7.toast.show({text:t.message,closeTimeout:3e3})})}},decrease:function(t){var e=this;if(this.canMakeChange)if(this.isMatchSaved)this.$f7.toast.show({text:"Match is already saved.",closeTimeout:3e3});else{var a=this.match.resultTable[this.currentDisplayingSet];if(0!==a[t]){var s=0===t?1:0,i=a[s]>a[t]&&this.isGameFinished(a);i||this.$db.ref("matches/".concat(this.match.id,"/resultTable/").concat(this.currentDisplayingSet,"/").concat(t)).set(this.match.resultTable[this.currentDisplayingSet][t]-1).catch(function(t){e.$f7.toast.show({text:t.message,closeTimeout:3e3})})}}},save:function(){this.canMakeChange&&this.$f7.dialog.confirm("Do you want to save match now?","Save Match",this.confirmSave)},confirmSave:function(){var t=this;this.canMakeChange&&(this.$f7.dialog.preloader("Saving match..."),this.$fns.httpsCallable("saveMatch")({matchId:this.match.id}).then(function(){t.$f7.dialog.close(),t.$f7.toast.show({text:"Match saved.",closeTimeout:3e3})}).catch(function(e){t.$f7.dialog.close(),t.$f7.toast.show({text:e.message,closeTimeout:3e3})}))},cancel:function(){this.canMakeChange&&this.$f7.dialog.confirm("Do you want to cancel this match? Note: when a game is canceled, it will be removed completely.","Cancel Match",this.confirmCancel)},confirmCancel:function(){var t=this;this.canMakeChange&&(this.$f7.dialog.preloader("Canceling match..."),this.$fns.httpsCallable("cancelMatch")({matchId:this.match.id}).then(function(){t.$f7.dialog.close(),t.$f7.toast.show({text:"Match canceled.",closeTimeout:3e3})}).catch(function(e){t.$f7.dialog.close(),t.$f7.toast.show({text:e.message,closeTimeout:3e3})}))},leave:function(){var t=this;this.$f7.dialog.confirm("Do you want to leave this match and go back to matches page?","Leave Match",function(){t.$f7router.navigate("/matches",{reloadCurrent:!0})})},cheer:function(t){this.user?(this.fire(t),this.$db.ref("cheers/".concat(this.match.id)).push({uid:this.user&&this.user.uid,createdAt:(new Date).getTime(),to:t})):this.$f7.toast.show({text:"Please sign in first.",closeTimeout:3e3})},fire:function(t){var e=window.devicePixelRatio||1,a=0===t?32*e:(window.innerWidth-32)*e,s=(window.innerHeight-32-16)*e,i=0===t?315:-135;this.confettiCannon.fire(a,s,i)}}},qt=Wt,Yt=(a("FRiD"),Object(d["a"])(qt,st,it,!1,null,"4a5c9275",null)),zt=Yt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"matches"},[a("f7-navbar",{staticClass:"bg-color-white",attrs:{title:"Matches","no-hairline":""}}),t.isInitialLoadingFinished?[a("h3",[t._v("Live Matches")]),a("ul",{staticClass:"match-list"},t._l(t.unfinishedMatches,function(e){return a("li",{key:e.id,on:{click:function(a){t.viewMatch(e)}}},[a("span",{staticClass:"date"},[t._v(t._s(t.distanceInWordsToNow(e.createdAt)))]),a("match-result-sheet",{attrs:{match:e}})],1)})),a("p",{directives:[{name:"show",rawName:"v-show",value:0===t.unfinishedMatches.length,expression:"unfinishedMatches.length === 0"}]},[t._v("Click PLAY to start a match now!")]),a("h3",[t._v("Finished Matches")]),a("ul",{staticClass:"match-list"},t._l(t.finishedMatches,function(e){return a("li",{key:e.id,on:{click:function(a){t.viewMatch(e)}}},[a("span",{staticClass:"date"},[t._v(t._s(t.format(e.finishedAt)))]),a("match-result-sheet",{attrs:{match:e}})],1)})),a("p",{directives:[{name:"show",rawName:"v-show",value:0===t.finishedMatches.length,expression:"finishedMatches.length === 0"}]},[t._v("No match history.")])]:a("loader")],2)},Ht=[],Kt=(a("INYr"),a("vDqi")),Zt=a.n(Kt),Jt=30,Vt={name:"Matches",components:{Loader:j,MatchResultSheet:Ct},data:function(){return{isInitialLoadingFinished:!1,page:0,finishedMatchIds:[],finishedMatches:[],unfinishedMatches:[]}},computed:{user:function(){return this.$root.user},totalPage:function(){return Math.ceil(this.finishedMatchIds.length/Jt)},canLoadMore:function(){return this.page<this.totalPage}},created:function(){var t=this;this.$db.ref("matches").orderByChild("finishedAt").equalTo(null).once("value").then(function(e){var a=e.val()||{},i=Object.keys(a);t.unfinishedMatches=i.map(function(t){return Object(s["a"])({},a[t],{id:t})}),t.unfinishedMatches.forEach(function(e){t.loadUserInfo(e)}),Zt.a.get("https://uwtta-web-app.firebaseio.com/matches.json?shallow=true").then(function(e){var a=e.data;t.finishedMatchIds=Object.keys(a||{}).filter(function(t){return!i.includes(t)}),t.isInitialLoadingFinished=!0,t.loadMore()})}),this.$db.ref("matches").orderByChild("createdAt").startAt(Date.now()).on("child_added",function(e){t.unfinishedMatches.unshift(Object(s["a"])({},e.val(),{id:e.key})),t.loadUserInfo(t.unfinishedMatches[0])}),this.$db.ref("matches").on("child_removed",function(e){var a=t.unfinishedMatches.findIndex(function(t){return t.id===e.key});-1!==a&&i["a"].delete(t.unfinishedMatches,a)}),this.$db.ref("matches").on("child_changed",function(e){var a,s=e.val();return s.id=e.key,a=t.unfinishedMatches.findIndex(function(t){return s.id===t.id}),-1!==a?s.finished?(i["a"].delete(t.unfinishedMatches,a),t.finishedMatches.push(s)):t.updateMatchChange(t.unfinishedMatches[a],s):(a=t.finishedMatches.findIndex(function(t){return s.id===t.id}),-1!==a?t.updateMatchChange(t.finishedMatches[a],s):void 0)})},methods:{format:function(t){return rt()(new Date(t),"YYYY-MM-DD HH:mm")},distanceInWordsToNow:function(t){return ct()(new Date(t))},loadMore:function(){var t=this;this.canLoadMore&&Promise.all(this.finishedMatchIds.slice(this.page*Jt,(this.page+1)*Jt).map(function(e){return t.$db.ref("matches/".concat(e)).once("value")})).then(function(e){e.forEach(function(e){t.finishedMatches.unshift(Object(s["a"])({},e.val(),{id:e.key})),t.loadUserInfo(t.finishedMatches[0])})})},updateMatchChange:function(t,e){delete e.createdBy,delete e.judge,delete e.player1,delete e.player2,Object.keys(e).forEach(function(a){i["a"].set(t,a,e[a])})},loadUserInfo:function(t){var e=this;["createdBy","judge","player1","player2"].forEach(function(a){e.$db.ref("users/".concat(t[a])).on("value",function(e){i["a"].set(t,a,Object(s["a"])({},e.val(),{id:e.key}))})})},viewMatch:function(t){var e=this;if("string"!==typeof t.createdBy&&"string"!==typeof t.judge&&"string"!==typeof t.player1&&"string"!==typeof t.player2){var a,s="".concat(t.player1.emoji).concat(t.player1.fullname," vs. ").concat(t.player2.fullname).concat(t.player2.emoji);a=t.finished?"Wanna view details of this match?":[t.createdBy.id,t.judge.id].includes(this.user&&this.user.uid)?"Judge, we are waiting for you! Ready to continue?":"Wanna watch this live match?",this.$f7.dialog.confirm(a,s,function(){e.$f7router.navigate("/scoreboard/".concat(t.id))})}}}},Xt=Vt,Qt=(a("4G/S"),Object(d["a"])(Xt,Gt,Ht,!1,null,"149f9b71",null)),te=Qt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile"},[a("f7-navbar",{staticClass:"bg-color-white",attrs:{title:"Profile","no-hairline":""}},[a("f7-nav-right",[a("f7-link",{attrs:{href:"/profile-edit"}},[a("span",{staticClass:"tabbar-label"},[t._v("Edit")])])],1)],1),t.user?[a("div",{staticClass:"main-content"},[a("div",{staticClass:"info"},[a("img",{staticClass:"photo",attrs:{src:t.user.photoURL}}),a("span",{staticClass:"name"},[t._v(t._s(t.user.fullname)+" "+t._s(t.user.emoji))]),t.user.bio?a("span",{staticClass:"bio"},[t._v(t._s(t.user.bio))]):t._e()]),a("div",{staticClass:"status"},[a("status-cell",{attrs:{value:t.stats.points,type:"info",title:"POINTS"}}),a("status-cell",{attrs:{value:t.stats.win,type:"success",title:"WON"}}),a("status-cell",{attrs:{value:t.stats.lose,type:"danger",title:"LOSE"}})],1)]),a("div",{staticClass:"actions"},[a("f7-button",{attrs:{color:"white","text-color":"black",fill:""},on:{click:t.signOut}},[t._v("Sign Out")])],1)]:[a("h1",{staticClass:"text-align-left"},[t._v("Table Denis Club")]),a("f7-list",{staticClass:"text-align-left",attrs:{inset:""}},[a("f7-list-item",[a("f7-label",[t._v("E-mail")]),a("f7-input",{attrs:{value:t.form.email,type:"email",placeholder:"Your e-mail",required:"",validate:"","error-message":"Please input a correct email","clear-button":""},on:{input:function(e){t.form.email=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Password")]),a("f7-input",{attrs:{value:t.form.password,type:"password",placeholder:"Your password",required:"",pattern:".{8,}","error-message":"Must be at least 8 digits",validate:"","clear-button":""},on:{input:function(e){t.form.password=e.target.value}}})],1)],1),t.form.error?a("div",{staticClass:"error-message"},[t._v(t._s(t.form.error))]):t._e(),a("div",{staticClass:"actions"},[a("f7-button",{attrs:{disabled:!t.validated,color:"white","text-color":"black",fill:""},on:{click:t.signIn}},[t._v("Sign In")]),a("span",{staticClass:"separator"},[t._v("or")]),a("f7-link",{attrs:{href:"/sign-up",color:"black"}},[t._v("Sign Up")])],1)]],2)},ae=[],se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-cell"},[a("div",{staticClass:"doughnut",class:t.type}),a("span",{staticClass:"title"},[t._v(t._s(t.title))]),a("span",{staticClass:"value"},[t._v(t._s(t.value))])])},ie=[],ne={name:"StatusCell",props:{title:{type:String,default:"-"},value:{type:String,default:"-"},type:{type:String,default:"normal"}}},re=ne,oe=(a("bKNW"),Object(d["a"])(re,se,ie,!1,null,"75372f95",null)),ce=oe.exports,le={name:"Profile",components:{StatusCell:ce},data:function(){return{form:{email:"",password:"",error:""},stats:{}}},computed:{validated:function(){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e=/.{8,}/;return t.test(this.form.email)&&e.test(this.form.password)},user:function(){return this.$root.$data.user}},watch:{user:function(t){var e=this;t?this.$fns.httpsCallable("getUserStatistics")({uid:t.uid}).then(function(t){var a=t.data;e.stats=a}).catch(function(){e.$f7.toast.show({text:"Failed to load user stats.",closeTimeout:3e3})}):this.stats={}}},methods:{signIn:function(){var t=this;this.$f7.dialog.preloader("Signing in..."),this.$auth.signInWithEmailAndPassword(this.form.email,this.form.password).then(function(){t.$f7.dialog.close()}).catch(function(e){t.form={email:"",password:"",error:e?e.message:""},t.$f7.dialog.close()})},signOut:function(){this.$auth.signOut().then(function(){})}}},ue=le,he=(a("4ekB"),Object(d["a"])(ue,ee,ae,!1,null,"839e75c6",null)),fe=he.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{staticClass:"profile-edit"},[t.user?[a("div",{staticClass:"main-content"},[a("f7-list",{attrs:{"no-hairlines-md":""}},[a("f7-list-item",[a("f7-label",[t._v("Full Name")]),a("f7-input",{staticClass:"disabled",attrs:{value:t.form.fullName,disabled:"",type:"text"},on:{input:function(e){t.form.fullName=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Email")]),a("f7-input",{staticClass:"disabled",attrs:{value:t.form.email,disabled:"",type:"email"},on:{input:function(e){t.form.email=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Bio")]),a("f7-input",{attrs:{value:t.form.bio,type:"text"},on:{input:function(e){t.form.bio=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Emoji")]),a("f7-input",{attrs:{value:t.form.emoji,type:"text"},on:{input:function(e){t.form.emoji=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Photo Url")]),a("f7-input",{attrs:{value:t.form.photoURL,type:"url"},on:{input:function(e){t.form.photoURL=e.target.value}}})],1)],1)],1),t.error?a("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e(),a("div",{staticClass:"actions"},[a("f7-button",{attrs:{color:"white","text-color":"black",fill:""},on:{click:t.save}},[t._v("Save")]),a("span",{staticClass:"separator"},[t._v("or")]),a("f7-button",{attrs:{color:"white","text-color":"black",fill:""},on:{click:function(e){t.$f7router.navigate("/profile")}}},[t._v("Go back")])],1)]:t._e()],2)},pe=[],me={name:"ProfileEdit",data:function(){return{form:{fullName:"",email:"",emoji:"",photoURL:"",bio:""},error:""}},computed:{user:function(){return this.$root.$data.user}},created:function(){this.user?this.form={fullName:this.user.fullname,email:this.user.email,emoji:this.user.emoji,photoURL:this.user.photoURL,bio:this.user.bio||""}:this.$f7router.navigate("/")},methods:{save:function(){var t=this;this.$f7.dialog.preloader("Updating profile..."),this.$fns.httpsCallable("updateProfile")({bio:this.form.bio,emoji:this.form.emoji,photoURL:this.form.photoURL}).then(function(){t.$f7.dialog.close();var e=t.$f7.notification.create({text:"Profile updated!",closeTimeout:3e3,closeOnClick:!0});e.open(),t.$f7router.navigate("/profile")}).catch(function(e){t.error=e.message,t.$f7.dialog.close()})}}},ve=me,ge=(a("+NtP"),Object(d["a"])(ve,de,pe,!1,null,"74e9bad4",null)),be=ge.exports,ye=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"match"},[a("h1",[t._v("Match")])])}],Ce={name:"Match"},we=Ce,Se=(a("KnUK"),Object(d["a"])(we,ye,_e,!1,null,"4c8b9854",null)),ke=Se.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("h1",[t._v("Table Denis Club")]),a("f7-block-title",{staticClass:"text-align-left"},[t._v("Credentials")]),a("f7-list",{staticClass:"text-align-left",attrs:{inset:""}},[a("f7-list-item",[a("f7-label",[t._v("Email")]),a("f7-input",{attrs:{value:t.form.email,type:"email",placeholder:"Your email",required:"",validate:"","error-message":"Please input a correct email"},on:{input:function(e){t.form.email=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Password")]),a("f7-input",{attrs:{value:t.form.password,type:"password",required:"",validate:"",pattern:".{8,}","error-message":"Must be at least 8 digits",placeholder:"Your password"},on:{input:function(e){t.form.password=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Confirm Password")]),a("f7-input",{attrs:{value:t.form.confirmPassword,type:"password",required:"",validate:"",pattern:".{8,}","error-message":"Must be at least 8 digits",placeholder:"Confirm your password"},on:{input:function(e){t.form.confirmPassword=e.target.value}}})],1)],1),a("f7-block-title",{staticClass:"text-align-left"},[t._v("Profile")]),a("f7-list",{staticClass:"text-align-left",attrs:{inset:""}},[a("f7-list-item",[a("f7-label",[t._v("Full Name")]),a("f7-input",{attrs:{value:t.form.fullname,required:"",validate:"",type:"text",placeholder:"Your real full name is required"},on:{input:function(e){t.form.fullname=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Profile Photo URL")]),a("f7-input",{attrs:{value:t.form.photoURL,required:"",validate:"","error-message":"Profile Photo URL is required",type:"text",placeholder:"Tip: copy & paste your GitHub avatar link"},on:{input:function(e){t.form.photoURL=e.target.value}}})],1),a("f7-list-item",[a("f7-label",[t._v("Emoji")]),a("f7-input",{attrs:{value:t.form.emoji,required:"",type:"text",placeholder:"Pick a emoji to represent yourself"},on:{input:function(e){t.form.emoji=e.target.value}}})],1)],1),t.error?a("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e(),a("div",{staticClass:"actions"},[a("f7-button",{attrs:{color:"white","text-color":"black",fill:""},on:{click:t.signUp}},[t._v("Sign Up")]),t._v("\n    or\n    "),a("f7-link",{attrs:{color:"black"},on:{click:function(e){t.$f7router.back()}}},[t._v("Cancel")])],1)],1)},xe=[],Me={name:"SignUp",data:function(){return{form:{email:"",password:"",confirmPassword:"",fullname:"",photoURL:"",emoji:""},error:""}},methods:{signUp:function(){var t=this;this.$f7.dialog.preloader("Signing up..."),this.$fns.httpsCallable("signUp")(this.form).then(function(e){var a=e.data.fullname;t.$f7.dialog.close();var s=t.$f7.notification.create({icon:"🏓",title:"Table Denis Club",titleRightText:"now",subtitle:"Profile Created!",text:"🎉Welcome, ".concat(a,". Sign in now."),closeTimeout:3e3,closeOnClick:!0});s.open(),t.$f7router.back()}).catch(function(e){t.$f7.dialog.close(),t.error=e.message})}}},$e=Me,je=(a("dEiz"),Object(d["a"])($e,Pe,xe,!1,null,"77ac4625",null)),Oe=je.exports,Te=[{path:"/",component:m,tabs:[{path:"/",id:"home",component:C},{path:"/ranking",id:"ranking",component:F},{path:"/matches",id:"matches",component:te},{path:"/profile",id:"profile",component:fe}]},{path:"/sign-up",component:Oe},{path:"/create-match",component:at},{path:"/scoreboard/:id",component:zt},{path:"/match/:id",component:ke},{path:"/profile-edit",component:be}],Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("f7-statusbar"),a("f7-panel",{attrs:{left:"",cover:""}},[a("f7-view",{attrs:{url:"/panel-left/","links-view":".view-main"}})],1),a("f7-panel",{attrs:{right:"",reveal:""}},[a("f7-view",{attrs:{url:"/panel-right/"}})],1),a("f7-view",{staticClass:"ios-edges",attrs:{main:!0,"push-state":!0,url:"/"}})],1)},De=[],Le={name:"App"},Ie=Le,Ne=(a("ZL7j"),Object(d["a"])(Ie,Re,De,!1,null,null,null)),Ae=Ne.exports;a("nKRb"),a("sS41"),a("YZs6"),a("N9VJ"),a("ZnJG");i["a"].use(r["a"],n["a"]),i["a"].config.productionTip=!1,c.a.initializeApp({apiKey:"AIzaSyA6VDgDMCtwut3AnIoZa5D_MNZ-UmMgTtg",authDomain:"uwtta-web-app.firebaseapp.com",databaseURL:"https://uwtta-web-app.firebaseio.com",projectId:"uwtta-web-app",storageBucket:"uwtta-web-app.appspot.com",messagingSenderId:"861274003236"}),i["a"].prototype.$db=c.a.database(),i["a"].prototype.$auth=c.a.auth(),i["a"].prototype.$fns=c.a.functions(),new i["a"]({data:function(){return{user:null,userRef:""}},created:function(){var t=this;this.$auth.onAuthStateChanged(function(e){e?(t.user=Object(s["a"])({},e),t.userRef="users/".concat(e.uid),t.$db.ref(t.userRef).on("value",t.onUserProfileChange)):(t.user=null,t.userRef&&t.$db.ref(t.userRef).off("value",t.onUserProfileChange))})},methods:{onUserProfileChange:function(t){var e=t.val();if(!this.user.fullname){var a=this.$f7.notification.create({icon:"🏓",title:"Table Denis Club",titleRightText:"now",subtitle:"Welcome back!",text:"".concat(e.fullname,", how are you?"),closeTimeout:3e3});a.open()}this.user=Object(s["a"])({},this.user,e)}},framework7:{root:"#app",id:"me.chengkang.tdc",name:"Table Denis Club - We are professionals!",theme:"ios",routes:Te},render:function(t){return t(Ae)}}).$mount("#app")},WbWX:function(t,e,a){t.exports=a.p+"img/ping-pong.0bd675f4.gif"},XvN4:function(t,e,a){},Z046:function(t,e,a){},ZL7j:function(t,e,a){"use strict";var s=a("bP1M"),i=a.n(s);i.a},ZP6q:function(t,e,a){},ZeCp:function(t,e,a){"use strict";var s=a("ZP6q"),i=a.n(s);i.a},ZnJG:function(t,e,a){},aBMy:function(t,e,a){"use strict";var s=a("2Wum"),i=a.n(s);i.a},bKNW:function(t,e,a){"use strict";var s=a("wKKl"),i=a.n(s);i.a},bP1M:function(t,e,a){},dEiz:function(t,e,a){"use strict";var s=a("o+IS"),i=a.n(s);i.a},dk9J:function(t,e,a){},fTxi:function(t,e,a){},fmdS:function(t,e,a){},g3Wy:function(t,e,a){"use strict";(function(t,e){a("xfY5"),a("VRzm");var s="undefined"!=typeof t&&t.exports&&"undefined"!=typeof e?e:window;(s._gsQueue||(s._gsQueue=[])).push(function(){var t=Math.PI/180,e=function(t,e,a,s,i){this.p=e,this.f="function"==typeof t[e],this.start=this.value=this.f?t[e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3)]():parseFloat(t[e]),this.velocity=a||0,this.v=this.velocity/i,s||0===s?(this.acceleration=s,this.a=this.acceleration/(i*i)):this.acceleration=this.a=0},a=Math.random(),i=s._gsDefine.globals,n=i.com.greensock.core.Animation._rootFramesTimeline,r=s._gsDefine.plugin({propName:"physics2D",version:"0.1.3",API:2,init:function(a,s,i){this._target=a,this._tween=i,this._runBackwards=!0===i.vars.runBackwards,this._step=0;for(var r,o=i._timeline,c=Number(s.angle)||0,l=Number(s.velocity)||0,u=Number(s.acceleration)||0,h=s.xProp||"x",f=s.yProp||"y",d=s.accelerationAngle||0===s.accelerationAngle?Number(s.accelerationAngle):c;o._timeline;)o=o._timeline;return this._stepsPerTimeUnit=r=o===n?1:30,s.gravity&&(u=Number(s.gravity),d=90),c*=t,d*=t,this._friction=1-Number(s.friction||0),this._overwriteProps.push(h),this._overwriteProps.push(f),this._x=new e(a,h,Math.cos(c)*l,Math.cos(d)*u,r),this._y=new e(a,f,Math.sin(c)*l,Math.sin(d)*u,r),this._skipX=this._skipY=!1,!0},set:function(){var t,e,a,s,i,n,r=this._tween._time,o=this._x,c=this._y;if(!0===this._runBackwards&&(r=this._tween._duration-r),1===this._friction)a=.5*r*r,t=o.start+(o.velocity*r+o.acceleration*a),e=c.start+(c.velocity*r+c.acceleration*a);else{if(r*=this._stepsPerTimeUnit,s=n=(0|r)-this._step,i=r%1,n>=0)for(;--n>-1;)o.v+=o.a,c.v+=c.a,o.v*=this._friction,c.v*=this._friction,o.value+=o.v,c.value+=c.v;else for(n=-n;--n>-1;)o.value-=o.v,c.value-=c.v,o.v/=this._friction,c.v/=this._friction,o.v-=o.a,c.v-=c.a;t=o.value+o.v*i,e=c.value+c.v*i,this._step+=s}this._skipX||(o.r&&(t=0|t+(0>t?-.5:.5)),o.f?this._target[o.p](t):this._target[o.p]=t),this._skipY||(c.r&&(e=0|e+(0>e?-.5:.5)),c.f?this._target[c.p](e):this._target[c.p]=e)}}),o=r.prototype;o._kill=function(t){return null!=t[this._x.p]&&(this._skipX=!0),null!=t[this._y.p]&&(this._skipY=!0),this._super._kill(t)},o._roundProps=function(t,e){(t.physics2D||t[this._x.p])&&(this._x.r=e),(t.physics2D||t[this._y.p])&&(this._y.r=e)},r._autoCSS=!0,r._cssRegister=function(){var t=i.CSSPlugin;if(t){var e=t._internals,s=e._parseToProxy,n=e._setPluginRatio,o=e.CSSPropTween;e._registerComplexSpecialProp("physics2D",{parser:function(t,e,i,c,l,u){u=new r;var h,f=e.xProp||"x",d=e.yProp||"y",p={};return p[f]=p[d]=a++,h=s(t,p,c,l,u),l=new o(t,"physics2D",0,0,h.pt,2),l.data=h,l.plugin=u,l.setRatio=n,u._onInitTween(h.proxy,e,c._tween),l}})}}}),s._gsDefine&&s._gsQueue.pop()()}).call(this,a("3UD+")(t),a("yLpj"))},hSuW:function(t,e,a){},hnIS:function(t,e,a){},jOoS:function(t,e,a){},lB53:function(t,e,a){},"o+IS":function(t,e,a){},oNJJ:function(t,e,a){},oQRH:function(t,e,a){},tY13:function(t,e,a){"use strict";var s=a("vAUg"),i=a.n(s);i.a},vAUg:function(t,e,a){},wKKl:function(t,e,a){},xqeh:function(t,e,a){"use strict";var s=a("hSuW"),i=a.n(s);i.a},"y+av":function(t,e,a){}});
//# sourceMappingURL=app.be620235.js.map